<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>学院管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel='stylesheet' href='https://rsms.me/inter/inter.css'>
    <link rel="stylesheet" href="./css/collegecss.css">
    <script src="../dapphtml/external/js/dialog.js"></script>
    <link rel="stylesheet" type="text/css" href="../dapphtml/css/shenshu/dialog.css">
    <script src="../dapphtml/external/jquery/jquery-1.10.1.min.js"></script>

</head>

<body>
    <!-- partial:index.partial.html -->
    <div onclick="javascript:history.back(-1);"><img src="../static/image/返回.png" width="50px" height="50px"></div>
    <section class="c-section">
        <h2 class="c-section__title"><span>Welcome</span></h2>
        <ul class="c-services">
            <li class="c-services__item"  style="display: inline-block;">
                <svg t="1650954730506" id="add_college" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2037" width="48" height="48"><path d="M511.256 0C228.9 0 0 228.9 0 511.256 0 623.8 36.805 727.509 98.429 811.957l38.415-39.993c-51.592-73.945-82.067-163.708-82.067-260.709 0-252.105 204.374-456.479 456.479-456.479 252.089 0 456.466 204.374 456.466 456.479 0 252.101-204.376 456.466-456.466 456.466-96.102 0-185.157-29.847-258.709-80.565l-34.387 42.609c83.032 58.26 183.962 92.734 293.096 92.734 282.351 0 511.245-228.894 511.245-511.244C1022.5 228.9 793.606 0 511.256 0z" p-id="2038"></path><path d="M492.979 255.62 492.979 492.986 255.613 492.986 255.613 547.762 492.979 547.762 492.979 785.128 547.756 785.128 547.756 547.762 785.121 547.762 785.121 492.986 547.756 492.986 547.756 255.62Z" p-id="2039"></path></svg>
                <h3>添加学院</h3>
                <hr>
                <svg t="1650956784332" id="search_college" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3686" width="48" height="48"><path d="M912.072815 946.738335c-4.78498 0-9.56996-1.824555-13.220093-5.475711L650.662083 693.076078c-0.285502-0.285502-0.561795-0.579191-0.827855-0.883113l-6.979972-7.948019c-6.671956-7.594979-6.096858-19.11843 1.297552-26.012444 32.130791-29.958312 57.424874-65.413825 75.181283-105.379049 18.374486-41.35692 27.691689-85.472674 27.691689-131.122363 0-86.355787-33.628912-167.542854-94.691639-228.604558-61.062727-61.062727-142.249795-94.691639-228.604558-94.691639s-167.541831 33.628912-228.604558 94.691639c-61.062727 61.062727-94.691639 142.249795-94.691639 228.604558s33.628912 167.542854 94.691639 228.604558c61.062727 61.062727 142.249795 94.691639 228.604558 94.691639 26.15059 0 52.16508-3.130294 77.326133-9.301853 5.090948-1.353834 73.4038-19.189038 120.842229-14.809287 10.282181 0.948605 17.847483 10.05296 16.899902 20.335141s-10.047844 17.853623-20.335141 16.899902c-41.659819-3.845585-107.272165 13.571087-107.930151 13.747095-0.125867 0.033769-0.251733 0.065492-0.3776 0.097214-28.132734 6.91755-57.20998 10.425444-86.425372 10.425444-48.684816 0-95.922676-9.538237-140.402727-28.352745-42.953278-18.166755-81.523735-44.172035-114.644063-77.290317-33.119305-33.119305-59.123562-71.691809-77.29134-114.644063-18.813484-44.479027-28.352745-91.716888-28.352745-140.401704s9.53926-95.922676 28.352745-140.402727c18.167778-42.953278 44.172035-81.524758 77.29134-114.644063 33.119305-33.119305 71.690786-59.123562 114.644063-77.29134 44.480051-18.813484 91.717911-28.352745 140.402727-28.352745s95.922676 9.53926 140.401704 28.352745c42.953278 18.167778 81.524758 44.173059 114.644063 77.29134 33.118282 33.119305 59.123562 71.690786 77.29134 114.644063 18.813484 44.480051 28.351722 91.717911 28.351722 140.402727 0 50.912553-10.399861 100.136651-30.91101 146.305157-17.285688 38.906102-40.96704 73.973782-70.526263 104.47547l242.313791 242.310721c7.302313 7.30129 7.302313 19.138896 0.001023 26.440186C921.642774 944.912757 916.857794 946.738335 912.072815 946.738335z" p-id="3687"></path><path d="M165.576059 421.887656c-0.696872 0-1.400906-0.038886-2.110057-0.118704-10.260691-1.152243-17.645892-10.404977-16.493649-20.666692 4.838192-43.080168 17.974373-83.934644 39.046295-121.429607 5.058203-9.002025 16.457834-12.19781 25.458835-7.139607 9.002025 5.058203 12.19781 16.45681 7.139607 25.458835-18.605753 33.108049-30.207999 69.202105-34.484396 107.282399C183.060269 414.827867 174.967964 421.887656 165.576059 421.887656z" p-id="3688"></path></svg>
                <h3>搜索学院</h3>
            </li>
            <hr>
            <li class="c-services__item" id="college_login">
                学院名称：<h3 id="addcollageName"></h3>
                学院账号：<p id="addcollageAc"></p>
            </li>
            
        </ul>
    </section>
    <!-- partial -->

</body>
<script>
    add_college.onclick = function() {
                Dialog.init('<input id="collageName" autocomplete="off" placeholder="请输入学院名称(中文)" type="text" maxlength="20" style="margin:8px 0;width:100%;padding:11px 8px;font-size:15px; border:1px solid #999;" value="" onkeyup="value=value.replace(/[^\u4E00-\u9FA5]/g,"")" onbeforepaste="clipboardData.setData("text",clipboardData.getData("ext").replace(/[^\u4E00-\u9FA5]/g,""))"> <input id="collagePw" autocomplete="off" placeholder="请输入学院密码(英文)" type="text" maxlength="20" style="margin:8px 0;width:100%;padding:11px 8px;font-size:15px; border:1px solid #999;" value="" onkeyup="value=value.replace(/[^\u4E00-\u9FA5]/g,"")" onbeforepaste="clipboardData.setData("text",clipboardData.getData("ext").replace(/[^\u4E00-\u9FA5]/g,""))">', {
                    title: '请输入你要添加的学院信息',
                    button: {
                        确定: function() {
                            if (this.querySelector('input').value.length >= 0) {
                                Dialog.init('你输入的内容是：' + this.querySelector('input').value);
                                var test = window.location.search;
                                var parm=decodeURI(test)
                                var user = parm.slice(6);
                                var collageName = $("#collageName").val()
                                var collagePw = $("#collagePw").val()
                                console.log(user,collageName,collagePw)
                                $.ajax({
                                    url:"http://localhost:8000/createCollege",
                                    type:"post",
                                    data:{collegeName:collageName,Passwd:collagePw,schoolName:user},
                                    success:function(res){
                                        document.getElementById("addcollageName").innerHTML=res.data.CollegeName
                                        document.getElementById("addcollageAc").innerHTML = res.data.CollegeAccount
                                        console.log(res)
                                    }
                                })
                                Dialog.close(this);
                            } else {
                                Dialog.init('你输入的内容不符合要求！', 1100);
                            };
                        },
                        点击关闭: function() {
                            Dialog.close(this);
                        }
                    }
                });
            }
            college_login.onclick=function(){
                var test = window.location.search;
                var parm=decodeURI(test)
                var user = parm.slice(6);
                var collageName = document.getElementById("addcollageName").innerHTML
            Dialog.init('<input type="text" placeholder="请输入密码"  style="margin:8px 0;width:100%;padding:11px 8px;font-size:15px; border:1px solid #999;"/>', {
                    title: '请输入学院密码',
                    button: {
                        确定: function() {
                           window.location.href='./show_college_info.html?collageName='+collageName+'&schoolname='+user
                        },
                        点击关闭: function() {
                            Dialog.close(this);
                        }
                    }
                });
            }
            search_college.onclick=function(){
                var test = window.location.search;
                var parm=decodeURI(test)
                var user = parm.slice(6);
                var collageName = document.getElementById("addcollageName").innerHTML
                Dialog.init('<input type="text" placeholder="请输入学院名称"  style="margin:8px 0;width:100%;padding:11px 8px;font-size:15px; border:1px solid #999;"/>', {
                    title: '请输入你要查询的学院名称',
                    button: {
                        确定: function() {
                            if (this.querySelector('input').value.length >= 0) {
                                Dialog.init('你输入的内容是：' + this.querySelector('input').value);
                                $.ajax({
                                    url:"http://localhost:8000/collage",
                                    type:"post",
                                    data:{schoolName:user,collageName:this.querySelector('input').value},
                                    success:function(res){
                                        
                                        document.getElementById("addcollageName").innerHTML = res.data[0].CollegeName
                                        document.getElementById("addcollageAc").innerHTML = res.data[0].CollegeAccount
                                        
                                    }
                                    
                                })
                                Dialog.close(this);
                            } else {
                                Dialog.init('你输入的内容不符合要求！', 1100);
                            };
                        },
                        点击关闭: function() {
                            Dialog.close(this);
                        }
                    }
                });
            }
        
</script>

</html>